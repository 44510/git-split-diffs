yarn run v1.22.10
$ yarn build && node ./build/index.js
$ tsc --build
commit a3e58244c55ee871c6b3db9e492fca8a5c804d0c
Author: Shrey Banga <banga.shrey@gmail.com>
Date:   Fri Apr 9 16:08:44 2021 -0700

    Only push/pull if needed

****************************************************************************************************************************************************************
.updatelaptop
****************************************************************************************************************************************************************
 ···  touch $LOCK_FILE
  50  echo "$current_time" > "$LAST_UPDATE_TIME_FILE"                                   50  echo "$current_time" > "$LAST_UPDATE_TIME_FILE"                                
  51                                                                                    51                                                                                 
  52  # Update the repo                                                                 52  # Update the repo                                                              
  53 -echo 'Pulling changes:'                                                           53 +remote_changes=$(git log --oneline HEAD..origin)                               
  54 -git log --oneline HEAD..origin                                                    54 +local_changes=$(git log --oneline origin..HEAD)                                
  55 -git pull                                                                          55 +                                                                               
  56 -git submodule init                                                                56 +if [[ -n $remote_changes ]]; then                                              
  57 -git submodule update                                                              57 +    echo 'Pulling changes:'                                                    
  58                                                                                    58 +    echo $remote_changes                                                       
  59  # Run the updates                                                                 59 +    git pull                                                                   
  60  python3 update.py                                                                 60 +    git submodule init                                                         
  61                                                                                    61 +    git submodule update                                                       
  62  # Push any pending commits                                                        62 +fi                                                                             
  63 -echo 'Pushing changes:'                                                           63                                                                                 
  64 -git log --oneline origin..HEAD                                                    64  # Run the updates                                                              
  65 -git push                                                                          65  python3 update.py                                                              
  65                                                                                    66                                                                                 
  65                                                                                    67  # Push any pending commits                                                     
  65                                                                                    68 \ No newline at end of file                                                     
  65                                                                                    69 +if [[ -n $local_changes ]]; then                                               
  65                                                                                    70 +    echo 'Pushing changes:'                                                    
  65                                                                                    71 +    git log --oneline origin..HEAD                                             
  65                                                                                    72 +    git push                                                                   
Done in 0.52s.
