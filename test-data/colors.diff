[1;32mcommit a3e58244c55ee871c6b3db9e492fca8a5c804d0c[m
Author: Shrey Banga <banga.shrey@gmail.com>
Date:   Fri Apr 9 16:08:44 2021 -0700

    Only push/pull if needed

[1;33mdiff --git a/.updatelaptop b/.updatelaptop[m
[1;33mindex 4b2eae4..e3e8929 100755[m
[1;33m--- a/.updatelaptop[m
[1;33m+++ b/.updatelaptop[m
[1;32m@@ -49,16 +49,23 @@[m [mtouch $LOCK_FILE[m
 echo "$current_time" > "$LAST_UPDATE_TIME_FILE"[m
 [m
 # Update the repo[m
[1;31m-echo 'Pulling changes:'[m
[1;31m-git log --oneline HEAD..origin[m
[1;31m-git pull[m
[1;31m-git submodule init[m
[1;31m-git submodule update[m
[1;32m+[m[1;32mremote_changes=$(git log --oneline HEAD..origin)[m
[1;32m+[m[1;32mlocal_changes=$(git log --oneline origin..HEAD)[m
[1;32m+[m
[1;32m+[m[1;32mif [[ -n $remote_changes ]]; then[m
[1;32m+[m[1;32m    echo 'Pulling changes:'[m
[1;32m+[m[1;32m    echo $remote_changes[m
[1;32m+[m[1;32m    git pull[m
[1;32m+[m[1;32m    git submodule init[m
[1;32m+[m[1;32m    git submodule update[m
[1;32m+[m[1;32mfi[m
 [m
 # Run the updates[m
 python3 update.py[m
 [m
 # Push any pending commits[m
[1;31m-echo 'Pushing changes:'[m
[1;31m-git log --oneline origin..HEAD[m
[1;31m-git push[m
\ No newline at end of file[m
[1;32m+[m[1;32mif [[ -n $local_changes ]]; then[m
[1;32m+[m[1;32m    echo 'Pushing changes:'[m
[1;32m+[m[1;32m    git log --oneline origin..HEAD[m
[1;32m+[m[1;32m    git push[m
[1;32m+[m[1;32mfi[m
\ No newline at end of file[m
